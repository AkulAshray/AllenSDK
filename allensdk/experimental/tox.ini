[tox]
envlist = py{27,35,36}
setupdir=../..

[testenv:py27]

[testenv:py35]

[testenv:py36]

[testenv]

passenv=HOME

setenv =
    PYTHONPATH = {toxinidir}
    ALLENSDK_EXPERIMENTAL = true
    LIMS2_PASSWORD = {env:LIMS2_PASSWORD:-}

commands =
    pip install -q -U pip
    pip install -r ../../requirements.txt
    pip install -r ../../test_requirements.txt
    pip install -r requirements.txt
    pip install -i http://aibs-artifactory/artifactory/api/pypi/pypi-local/simple --trusted-host aibs-artifactory --extra-index-url https://pypi.org/simple aibs_sync_extractor

    py{27,35,36}: coverage run --source nwb -m pytest --basetemp={envtmpdir} {posargs}
    py{27,35,36}: coverage report

deps =
    pytest
    coverage
